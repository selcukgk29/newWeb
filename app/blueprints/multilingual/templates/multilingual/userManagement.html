{% extends "base.html" %} {% block content %}
<!-- Custom fonts for this template-->
<link
  rel="stylesheet"
  href="{{url_for('static', filename='/stylesheets/font.css')}}"
/>
<link
  href="{{ url_for('static', filename='/vendor/fontawesome-free/css/all.min.css') }}"
/>
<link
  rel="stylesheet"
  href="{{ url_for('static', filename='/stylesheets/cards.css')}}"
/>
<link
  href="{{ url_for('static', filename='/stylesheets/sb-admin-2.min.css')}}"
  rel="stylesheet"
/>

<!-- Begin Page Content -->
<div class="container-fluid">
  <!-- Page Heading -->
  <div class="d-sm-flex align-items-center justify-content-between mb-4">
    <h1 class="h3 mb-0 text-gray-800">{{_('User Management')}}</h1>
  </div>

  <!-- Content Row -->
  <div class="row">
    <!-- Area Chart -->
    <div class="col-xl-12">
      <div class="card shadow mb-4">
        <!-- Card Header - Dropdown -->
        <div
          class="refreshButton card-header py-3 d-flex flex-row align-items-center justify-content-between"
        >
          <a
            class="nav-link collapsed"
            href="#"
            data-toggle="collapse"
            data-target="#card-body"
            aria-expanded="true"
            aria-controls="card-body"
          >
            <img
              src="/static/icons/plus.png"
              alt=""
              style="width: 20px; height: 20px"
            />
            <span> {{_('Add User')}}</span>
          </a>
          <img
            src="/static/icons/chevron-down-solid-removebg-preview.png"
            alt=""
            class="imageIcon"
          />
        </div>
        <!-- Card Body -->
        <div
          id="card-body"
          class="card-body collapsed"
          aria-labelledby="headingTwo"
          data-parent="#accordionSidebar"
        >
          <div class="container">
            <div class="h5 mb-0 font-weight-bold text-gray-800">
              <div class="input-box">
                <span class="details">{{_('Username')}}</span>
                <form
                  action="{{url_for('multilingual.userManagementAddUser')}}"
                  method="POST"
                >
                  <div class="input-box alignmentCenter">
                    <input
                      class="addUserInputs inputsSameParameter"
                      type="text"
                      name="newUsername"
                      required
                    />
                  </div>
                  <span class="details">{{_('Password')}}</span>
                  <div class="input-box alignmentEnd">
                    <input
                      class="addUserInputs inputsSameParameter"
                      type="password"
                      name="newUserPassword"
                      id="show_hide_password"
                      required
                    />
                    <div class="shicon1">
                      <a type="button" name="dynamic">
                        <img
                          src="/static/icons/eye-solid-removebg-preview.png"
                          alt=""
                          class="imageIcon"
                        />
                      </a>
                    </div>
                  </div>
                  <div class="input-box">
                    <span class="details">Mail</span>
                    <input
                      class="addUserInputs inputsSameParameter"
                      type="text"
                      name="newUserMail"
                    />
                  </div>

                  <div class="input-box" id="ipText">
                    <span class="details">{{_('Access IP')}}</span>
                    <input
                      class="addUserInputs inputsSameParameter ipInput"
                      type="text"
                      name="newUserIP"
                      id="newUserIP"
                      value="-"
                      required
                    />
                  </div>
                  <div class="input-box alignmentEnd">
                    <span class="alignmentEnd margBottom"
                      >{{_('Authority:')}}</span
                    >
                    <select name="auth" id="option" class="btn btn-secondary">
                      <option name="admin" value="Administrator">
                        {{_('Administrator')}}
                      </option>
                      <option name="Technician" value="Technician">
                        {{_('Technician')}}
                      </option>
                      <option name="Operator" value="Operator">
                        {{_('Operator')}}
                      </option>
                    </select>
                  </div>
                  {% with messages=get_flashed_messages() %} {% if messages %}
                  <div class="input-box">
                    <div class="alert alert-danger" id="danger-alert">
                      {{messages[0]}}
                    </div>
                  </div>
                  {% endif %} {% endwith %}
                  <div class="input-box alignmentEnd">
                    <button type="submit" class="btn btn-primary applyButton">
                      Add
                    </button>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <!-- Area Chart -->
        <div class="col-xl-12">
          <div class="card shadow mb-4">
            <!-- Card Header - Dropdown -->
            <div
              class="refreshButton card-header py-3 d-flex flex-row align-items-center justify-content-between"
            >
              <a
                class="nav-link collapsed"
                href="#"
                data-toggle="collapse"
                data-target="#card-body-table"
                aria-expanded="true"
                aria-controls="card-body-table"
              >
                <img
                  src="/static/icons/table-cells-large-solid-removebg-preview.png"
                  alt=""
                  style="width: 20px; height: 20px"
                />
                <span> User Table</span>
              </a>
              <img
                src="/static/icons/chevron-down-solid-removebg-preview.png"
                alt=""
                class="imageIcon"
              />
            </div>
            <!-- Card Body -->
            <div
              id="card-body-table"
              class="card-body-table collapse"
              aria-labelledby="headingTwo"
              data-parent="#accordionSidebar"
            >
              <div class="container">
                <table class="table table-hover table-responsive-md table-flex">
                  <thead>
                    <tr>
                      <th scope="col">#</th>
                      <th scope="col">{{_('Username')}}</th>
                      <th scope="col">{{_('Password')}}</th>
                      <th scope="col"></th>
                      <th scope="col">{{_('Authority')}}</th>
                      <th scope="col">Mail</th>
                      <th scope="col">IP</th>
                      <th scope="col">{{_('Actions')}}</th>
                    </tr>
                  </thead>
                  <tbody>
                    {% for user in users%}
                    <tr>
                      <th scope="row">{{user[4]}}</th>
                      <td>{{user[0]}}</td>
                      <td>
                        <input
                          class="table-input"
                          name="newUserPassword"
                          type="password"
                          value="{{user[1]}}"
                          readonly
                        />
                      </td>
                      <td>
                        <a type="button" class="" name="dynamic">
                          <img
                            src="/static/icons/eye-solid-removebg-preview.png"
                            alt=""
                            class="imageIcon"
                          />
                        </a>
                      </td>
                      <td>{{user[2]}}</td>
                      <td>{{user[3]}}</td>
                      <td>{{user[5]}}</td>
                      <td>
                        <form action="userManagement/editUser" method="POST">
                          <button
                            type="submit button"
                            class="btn btn-default"
                            name="EditUserId"
                            value="{{user[4]}}"
                          >
                            <img
                              src="/static/icons/user-pen-solid-removebg-preview.png"
                              alt=""
                              class="imageIcon"
                            />
                          </button>
                        </form>
                        {% if user[4]!=0 %}
                        <form
                          action="{{url_for('multilingual.userManagementDeleteUser')}}"
                          method="POST"
                        >
                          <button
                            type="submit button"
                            class="btn btn-default"
                            name="DeleteUserId"
                            value="{{user[4]}}"
                          >
                            <img
                              src="/static/icons/trash-can-solid-removebg-preview.png"
                              alt=""
                              class="imageIcon"
                            />
                          </button>
                        </form>
                      </td>
                      {% endif %}
                    </tr>
                    {% endfor %}
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script>
      window.setTimeout(function () {
        $(".alert")
          .fadeTo(500, 0)
          .slideUp(500, function () {
            $(this).remove();
          });
      }, 5000);
    </script>
    <script src="{{url_for('static', filename='/javascripts/public.js')}}"></script>
    <script src="{{url_for('static', filename='/javascripts/shicon.js')}}"></script>
    {% endblock content %}
  </div>
</div>
